
<div class="page-header">

	<h1>Bibliothèque</h1>


	<div class="btn-group">

		<button id="dropdown_type" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			Filtre <span class="caret"></span>
		</button>


		<ul class="dropdown-menu" aria-labelledby="dropdown_type">

			<li class="dropdown-header">Type de recette</li>
			<li><%= link_to 'Toutes', recipes_path %></li>
			<% Recipe.types.each do |type| %>
				<li><%= link_to type, recipes_path(type: type) %></li>
			<% end %>

			<li role="separator" class="divider"></li>

			<li class="dropdown-header">Saison</li>
			<% Recipe.seasons.each do |season| %>
				<li><%= link_to season, recipes_path(season: season) %></li>
			<% end %>

		</ul>

		<button id="filter" type="button" class="btn btn-default">Recherche avancée</button>
	</div>

</div>



<div class="row">


		<%= form_tag  recipes_path , method: "GET", id: "search_recipe_form" , class: 'form-inline' do  %>

				<div class="form-group">
					<%= label_tag  'Titre', nil, class: 'sr-only' %>
					<%= text_field_tag 'name' , params[:name], placeholder: "Titre", class: "form-control"  %>
				</div>

				<div class="form-group">
					<%= label_tag  'Ingrédients', nil, class: 'sr-only' %>
					<%= text_field_tag 'ingredients' , params[:ingredients] , placeholder: "Ingrédient" , class: "form-control"  %>
				</div>

				<div class="form-group">
					<%= label_tag  'Type', nil, class: 'sr-only' %>
					<%= select_tag "type",
						options_for_select(Recipe.types , params[:type]),
						class: "form-control"  %>
				</div>

				<div class="form-group">
					<%= label_tag  'Saison', nil, class: 'sr-only' %>
					<%= select_tag "season",
						options_for_select( Recipe.seasons, params[:season]),
						class: "form-control"  %>
				</div>


				<div class="form-group">	
					<%= submit_tag "go!", class: "btn btn-primary btn-lg"%>
				</div>

		<% end %>

</div>

<div class="row">
	<%= render 'shared/recipes' , :recipes => @recipes %>
</div>

<div class="row">
	<nav aria-label="Page navigation">
		<%= will_paginate @recipes , class: "pagination" %>
	</nav>
</div>



<div class="row alert alert-info" role="alert">Trop de choix? Trouvez des <%= link_to "recettes avec ce qu'il vous reste dans votre frigo" , fridge_path, class: 'alert-link' %> ou bien laissez vous tenter par <%= link_to "une recette au hasard" , recipes_shuffle_path, class: 'alert-link' %></div>

	

<script type="text/javascript">
	document.addEventListener("DOMContentLoaded", function(event) { 
		$('#filter').on('click', function(e){
			e.preventDefault();
			$("#search_recipe_form").slideToggle();
		})
	});
</script>