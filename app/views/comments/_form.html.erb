<% #  if a comment exists, I show a message to edit it. Else I show a form to add one  %>
<% if !Comment.did_I_comment_this? current_user.id , recipe_id %>


  <%= form_for(comment) do |f| %>
    <% if @comment.errors.any? %>
      <div id="error_explanation">
        <h2>Il y a <%= pluralize(@comment.errors.count, "erreurs")%> à corriger :( </h2>

        <ul>
        <% @comment.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <fieldset>
      <legend>ajoutez votre commentaire</legend>

      <%= f.label :title %><br>
      <%= f.text_field :title %>

      <%= f.label :content %><br>
      <%= f.text_area :content %>

      <%= f.hidden_field :recipe_id, :value => @recipe.id %>

      <div class="actions">
        <%= f.submit  'ajouter' %>
      </div>
    </fieldset>



  <% end %>

<% else %>

  <p><strong>Vous ne pouvez pas commenter cette recette</strong> car vous l'avez déjà fait. Ne pas commenter une recette c'est <i>Has-been</i>!!</p>

<% end %>
  
